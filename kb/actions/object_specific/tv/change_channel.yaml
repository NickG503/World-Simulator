action: change_channel
object_type: tv

parameters:
  to_channel:
    type: choice
    choices: [low, medium, high]
    required: true

preconditions:
  - type: attribute_check
    target: screen.power
    operator: equals
    value: on
  - type: attribute_check
    target: power_source.voltage
    operator: not_equals
    value: low

effects:
  - type: set_attribute
    target: audio.channel
    value:
      type: parameter_ref
      name: to_channel
  - type: conditional
    condition:
      type: attribute_check
      target: power_source.voltage
      operator: equals
      value: high
    then:
      - type: set_attribute
        target: screen.brightness
        value: high
    else:
      - type: set_attribute
        target: screen.brightness
        value: medium
