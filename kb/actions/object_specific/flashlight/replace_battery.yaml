action: replace_battery
object_type: flashlight

parameters:
  new_level:
    type: choice
    choices: [low, medium, high, full]
    required: true

preconditions:
  - type: attribute_check
    target: bulb.state
    operator: equals
    value: off

effects:
  - type: set_attribute
    target: battery.level
    value:
      type: parameter_ref
      name: new_level
  - type: set_trend
    target: battery.level
    direction: none
