type: kettle
parts:
  control:
    attributes:
      power:
        space: binary_state
        default: 'off'
        mutable: true
  tank:
    attributes:
      level:
        space: water_level
        default: low
        mutable: true
  heater:
    attributes:
      temperature:
        space: temperature_level
        default: cold
        mutable: true

behaviors:
  heat:
    preconditions:
      - type: attribute_check
        target: control.power
        operator: equals
        value: on
    effects:
      - type: conditional
        condition:
          type: attribute_check
          target: tank.level
          operator: not_equals
          value: empty
        then:
          - type: set_attribute
            target: heater.temperature
            value: hot
        else:
          - type: set_attribute
            target: heater.temperature
            value: warm
