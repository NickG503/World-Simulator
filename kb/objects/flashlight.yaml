type: flashlight
parts:
  switch:
    attributes:
      position:
        space: binary_state
        default: 'off'
        mutable: true
  bulb:
    attributes:
      state:
        space: binary_state
        default: 'off'
        mutable: true
      brightness:
        space: brightness_level
        default: none
  battery:
    attributes:
      level:
        space: battery_level
        default: medium
        mutable: true
      type:
        space: battery_types
        mutable: false
        default: AA

constraints:
- type: dependency
  condition:
    type: attribute_check
    target: bulb.state
    operator: equals
    value: on
  requires:
    type: attribute_check
    target: battery.level
    operator: not_equals
    value: empty
